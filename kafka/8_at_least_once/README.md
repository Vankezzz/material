# Описание
Данный пример демонстрирует как идет балансировка по хешу (по key у message), в других же случаях round-robin
> Порядок записей сохраняется относительно партиции, а не топика
## Дополнительная информация
в
```
    conf = {
         # Mandatory
        'bootstrap.servers': bootstrap_servers,
        'client.id': socket.gethostname(),
         # Optional
         
         # Смотри ниже   
        'acks': 'all',           
         # Не будет повторных отправок - защитит от дублирования сообщения после ошибки
        'enable.idempotence': True, 
    }
```
### ACKs
1. `acks=0`

Если установлено значение ноль, производитель вообще не будет ждать подтверждения от сервера.
Запись будет немедленно добавлена в буфер сокета и будет считаться отправленной. 
В этом случае нельзя гарантировать, что сервер получил запись, 
и конфигурация retries не вступит в силу 
(поскольку клиент, как правило, не узнает ни о каких сбоях). 
Смещение, возвращаемое для каждой записи, всегда будет установлено на -1

2. `acks=1`

Это будет означать, что лидер запишет запись в свой локальный журнал,
но ответит, не дожидаясь полного подтверждения от всех реплик.
В этом случае, если лидер выйдет из строя сразу после подтверждения записи, 
но до того, как реплики воспроизведут ее, запись будет потеряна.

3. `acks=all` или `acks=-1`

Это означает, что лидер будет ждать полного набора синхронизированных реплик, 
чтобы подтвердить запись. 
Это гарантирует, что запись не будет потеряна, 
пока хотя бы одна синхронизированная реплика остается активной. 
Это самая надежная доступная гарантия. 

# Ссылки
1. [Конфигурация producer](https://docs.confluent.io/platform/current/installation/configuration/producer-configs.html)